<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet">
    <title>–ë–∞—Ä "–•–≤–æ—Å—Ç–∞—Ç—ã–π –ì–ª–æ—Ç–æ–∫" üç∫</title>
    <style>
        body {
            background-color: #1a0f0a; /* –¢–µ–º–Ω—ã–π –¥—Ä–µ–≤–µ—Å–Ω—ã–π —Ü–≤–µ—Ç */
            color: #f3e5ab;
            font-family: 'Noto Color Emoji', 'Segoe UI', serif;
            display: flex; flex-direction: column; align-items: center;
            margin: 0; min-height: 100vh;
        }

        .bar-header {
            background: #2d1b0d; width: 100%; text-align: center;
            padding: 20px; border-bottom: 4px solid #5d4037;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .stats { color: #ffcc00; font-weight: bold; margin-top: 5px; }

        .bar-scene {
            position: relative; width: 90%; max-width: 500px;
            height: 300px; margin-top: 20px;
            background: #3e2723; border-radius: 20px;
            border: 8px solid #2d1b0d; display: flex;
            justify-content: space-around; align-items: flex-end;
            padding-bottom: 20px;
        }

        /* –°—Ç–æ–ª—ã —Å –≥–æ—Å—Ç—è–º–∏ */
        .table { font-size: 50px; cursor: pointer; transition: 0.3s; }
        .table:hover { transform: scale(1.1); filter: brightness(1.2); }

        /* –°—Ç–∏–ª–∏ –∏–≥—Ä—ã –≤ –Ω–∞–ø–µ—Ä—Å—Ç–∫–∏ */
        .game-zone {
            display: none; background: rgba(0,0,0,0.8);
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            flex-direction: column; align-items: center; justify-content: center;
            z-index: 100;
        }

        .cup-container { display: flex; gap: 20px; margin: 30px 0; }
        .cup { 
            font-size: 60px; cursor: pointer; transition: 0.5s ease-in-out;
            position: relative;
        }
        
        .btn {
            background: #5d4037; color: white; border: 2px solid #ffcc00;
            padding: 10px 20px; border-radius: 10px; cursor: pointer;
            text-decoration: none; margin: 5px;
        }
    </style>
</head>
<body>

<div class="bar-header">
    <h1>üçª –ë–∞—Ä "–•–≤–æ—Å—Ç–∞—Ç—ã–π –ì–ª–æ—Ç–æ–∫"</h1>
    <div class="stats">–í –∫–æ—à–µ–ª—å–∫–µ: <span id="balance">0</span> üßÄ</div>
</div>

<div class="bar-scene">
    <div class="table" onclick="talk('–ë–∞—Ä–º–µ–Ω', '–≠–π, –ø—É—à–∏—Å—Ç—ã–π! –•–æ—á–µ—à—å —Å—ã–≥—Ä–∞—Ç—å –≤ —Å—Ç–∞–∫–∞–Ω—á–∏–∫–∏? –û–¥–∏–Ω –∫–æ–Ω ‚Äî 5 —Å—ã—Ä–∫–æ–≤.')">üêπüç∏</div>
    <div class="table" onclick="talk('–°—Ç–∞—Ä–∞—è –∫—Ä—ã—Å–∞', '–†–∞–Ω—å—à–µ —Å—ã—Ä –±—ã–ª –∂–µ–ª—Ç–µ–µ, –∞ –∫–æ—Ç—ã ‚Äî –º–µ–¥–ª–µ–Ω–Ω–µ–µ...')">üëµüêÅ</div>
    <div class="table" onclick="openGame()">üïµÔ∏è‚Äç‚ôÇÔ∏èüé≤</div> </div>

<p id="dialog" style="margin-top: 20px; background: #2d1b0d; padding: 10px; border-radius: 10px; min-height: 20px; width: 80%; text-align: center;">
    –ù–∞–∂–º–∏ –Ω–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π, —á—Ç–æ–±—ã –ø–æ–±–æ–ª—Ç–∞—Ç—å.
</p>

<div id="game-overlay" class="game-zone">
    <h2>–ì–¥–µ —Å–ø—Ä—è—Ç–∞–Ω —Å—ã—Ä? üßÄ</h2>
    <p>–°—Ç–∞–≤–∫–∞: 5 —Å—ã—Ä–∫–æ–≤</p>
    <div class="cup-container">
        <div id="cup0" class="cup" onclick="checkCup(0)">üçØ</div>
        <div id="cup1" class="cup" onclick="checkCup(1)">üçØ</div>
        <div id="cup2" class="cup" onclick="checkCup(2)">üçØ</div>
    </div>
    <button class="btn" onclick="closeGame()">–£–π—Ç–∏ –∏–∑-–∑–∞ —Å—Ç–æ–ª–∞</button>
</div>

<div style="margin-top: 30px;">
    <a href="https://de6ulu3m-code.github.io/rattown/" class="btn">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–æ—Ä–æ–¥</a>
</div>

<script>
    let cheese = parseInt(localStorage.getItem('ratCheese')) || 0;
    let winningCup = 0;
    let canPlay = true;

    function updateDisplay() {
        document.getElementById('balance').innerText = cheese;
        localStorage.setItem('ratCheese', cheese);
    }

    function talk(name, text) {
        document.getElementById('dialog').innerHTML = `<b>${name}:</b> "${text}"`;
    }

    function openGame() {
        if (cheese < 5) {
            alert("–ú–∞–ª–æ–≤–∞—Ç–æ —Å—ã—Ä–∞ –¥–ª—è –∏–≥—Ä—ã! –ù—É–∂–Ω–æ —Ö–æ—Ç—è –±—ã 5 üßÄ.");
            return;
        }
        document.getElementById('game-overlay').style.display = 'flex';
        resetCups();
    }

    function resetCups() {
        winningCup = Math.floor(Math.random() * 3);
        canPlay = true;
        for(let i=0; i<3; i++) {
            document.getElementById('cup'+i).innerText = 'üçØ';
            document.getElementById('cup'+i).style.transform = 'translateY(0)';
        }
    }

    function checkCup(index) {
        if (!canPlay) return;
        canPlay = false;

        cheese -= 5; // –°–Ω–∏–º–∞–µ–º —Å—Ç–∞–≤–∫—É
        
        const cups = [document.getElementById('cup0'), document.getElementById('cup1'), document.getElementById('cup2')];
        
        // –ü–æ–¥–Ω–∏–º–∞–µ–º —Å—Ç–∞–∫–∞–Ω—ã
        for(let i=0; i<3; i++) {
            cups[i].style.transform = 'translateY(-40px)';
            if (i === winningCup) {
                cups[i].innerHTML = 'üçØ<br><span style="font-size:30px">üßÄ</span>';
            }
        }

        if (index === winningCup) {
            cheese += 15; // –í—ã–∏–≥—Ä—ã—à
            alert("–£–≥–∞–¥–∞–ª! +10 —Å—ã—Ä–∫–æ–≤ –ø—Ä–∏–±—ã–ª–∏!");
        } else {
            alert("–ú–∏–º–æ! –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑.");
        }

        updateDisplay();
        setTimeout(resetCups, 2000);
    }

    function closeGame() {
        document.getElementById('game-overlay').style.display = 'none';
    }

    updateDisplay();
</script>
</body>
  </html>
